<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h2>Welcome, Admin {{ username }}!</h2>

        <div class="chat-box">
            <h3>모든 사용자 데이터</h3>
            <ul>
                {% for item in all_data %}
                    <li><strong>{{ item.username }}</strong>: {{ item.data }}</li>
                {% endfor %}
            </ul>
        </div>

        <h3>쿼리 입력</h3>
        <form method="post" action="/dashboard">
            <input type="text" name="query_input" placeholder="질문을 입력하세요">
            <button type="submit">전송</button>
        </form>

        {% if query %}
            <div class="chat-box">
                <p class="user-message"><strong>나:</strong> {{ query }}</p>
                <p class="bot-message"><strong>AI:</strong> {{ response }}</p>
            </div>
        {% endif %}

        <h3>데이터 추가</h3>
        <form method="post" action="/admin_edit">
            <select name="target_user">
                {% for user in all_users %}
                    <option value="{{ user }}">{{ user }}</option>
                {% endfor %}
            </select>
            <input type="text" name="add_data" placeholder="추가할 데이터">
            <button type="submit">추가</button>
        </form>

        <h3>데이터 수정</h3>
        <form method="post" action="/admin_edit">
            <select name="target_user">
                {% for user in all_users %}
                    <option value="{{ user }}">{{ user }}</option>
                {% endfor %}
            </select>
            <input type="text" name="edit_old_data" placeholder="기존 데이터">
            <input type="text" name="edit_new_data" placeholder="새로운 데이터">
            <button type="submit">수정</button>
        </form>

        <h3>데이터 삭제</h3>
        <form method="post" action="/admin_edit">
            <select name="target_user">
                {% for user in all_users %}
                    <option value="{{ user }}">{{ user }}</option>
                {% endfor %}
            </select>
            <input type="text" name="delete_data" placeholder="삭제할 데이터">
            <button type="submit">삭제</button>
        </form>

        <a href="/logout">Logout</a>
    </div>
</body>
</html>
